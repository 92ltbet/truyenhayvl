(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2191:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(7096),a=s(6132),i=s(7284),l=s.n(i),n=s(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6415)),"C:\\Users\\Admin\\Desktop\\anh 282\\1\\vencomic\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5346)),"C:\\Users\\Admin\\Desktop\\anh 282\\1\\vencomic\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Admin\\Desktop\\anh 282\\1\\vencomic\\src\\app\\page.tsx"],m="/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6162:(e,t,s)=>{Promise.resolve().then(s.bind(s,402)),Promise.resolve().then(s.bind(s,7097)),Promise.resolve().then(s.bind(s,8698)),Promise.resolve().then(s.bind(s,8354)),Promise.resolve().then(s.bind(s,9209)),Promise.resolve().then(s.bind(s,9617)),Promise.resolve().then(s.bind(s,4589)),Promise.resolve().then(s.bind(s,1285)),Promise.resolve().then(s.bind(s,2612)),Promise.resolve().then(s.bind(s,7552)),Promise.resolve().then(s.bind(s,6678)),Promise.resolve().then(s.t.bind(s,7490,23)),Promise.resolve().then(s.bind(s,7478)),Promise.resolve().then(s.bind(s,9535)),Promise.resolve().then(s.bind(s,4876))},7478:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(3854);s(4218);var a=s(5548),i=s.n(a),l=s(1956),n=s.n(l),o=s(7919),c=s(5323),d=s(5003);function m({comic:e,className:t=""}){console.log("Comic data:",e),console.log("ChaptersLatest:",e.chaptersLatest),console.log("Chapters:",e.chapters),console.log("Total chapters:",e.total_chapters);let s="?";if(e.chaptersLatest&&e.chaptersLatest.length>0){let t=e.chaptersLatest[0].chapter_name.match(/\d+/);t&&(s=t[0])}if("?"===s&&e.total_chapters&&e.total_chapters>0&&(s=e.total_chapters.toString()),"?"===s&&e.chapters&&e.chapters.length>0){for(let t of e.chapters)if(t.server_data&&t.server_data.length>0){for(let e of t.server_data){let t=e.chapter_name.match(/\d+/);if(t){s=t[0];break}}if("?"!==s)break}}let a="";if(e.chaptersLatest&&e.chaptersLatest.length>0)try{a=(0,c.Z)(new Date(e.updatedAt),{addSuffix:!0,locale:d.vi})}catch(e){a="gần đ\xe2y"}return(0,r.jsxs)(i(),{href:`/truyen/${e.slug}`,className:`group ${t}`,children:[(0,r.jsxs)("div",{className:"relative aspect-[2/3] rounded-lg overflow-hidden",children:[r.jsx(n(),{src:(0,o.J)(e.thumb_url),alt:e.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105",sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw",loading:"lazy",onError:e=>{let t=e.target;t.src="/images/placeholder.jpg"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,r.jsxs)("div",{className:"absolute top-1 md:top-2 left-1 md:left-2 px-1.5 py-0.5 md:px-2 md:py-1 text-[10px] md:text-xs rounded-full bg-pink-600 text-white",children:["Chap ",s]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx("h3",{className:"font-medium text-white line-clamp-2 group-hover:text-pink-400 transition-colors",children:e.name}),a&&r.jsx("div",{className:"mt-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[r.jsx("span",{className:"font-medium text-pink-400",children:"Cập Nhật:"}),r.jsx("span",{children:a})]})})]})]})}},9535:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(3854),a=s(1956),i=s.n(a),l=s(5548),n=s.n(l),o=s(4218),c=s(7919);function d({comics:e}){let t=(0,o.useRef)(null),[s,a]=(0,o.useState)(0),[l,d]=(0,o.useState)(!1),m=(0,o.useCallback)(()=>{if(t.current){let r=(s+1)%e.length;a(r),t.current.scrollTo({left:r*t.current.offsetWidth,behavior:"smooth"})}},[s,e.length]);(0,o.useEffect)(()=>{if(l){let e=setInterval(()=>{m()},3e3);return()=>clearInterval(e)}},[l,m]),(0,o.useEffect)(()=>{if(t.current){let e=s*(l?180:200);t.current.scrollTo({left:e,behavior:"smooth"})}},[s,l]),(0,o.useEffect)(()=>{let e=()=>{d(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let h=()=>{let t=Math.max(0,s-Math.floor(2.5)),r=Math.min(e.length-1,t+5-1);return r-t<4&&t>0&&(t=Math.max(0,r-5+1)),e.slice(t,r+1)};return(0,r.jsxs)("div",{className:"carousel-container relative w-full",children:[r.jsx("div",{ref:t,className:"carousel-slider flex items-center justify-center overflow-x-auto snap-x snap-mandatory scrollbar-hide relative",children:r.jsx("div",{className:"flex items-center justify-center mx-auto",children:h().map((t,s)=>{let l=h(),o=Math.floor(l.length/2),d=s===o,m=Math.abs(s-o),u=d?1.2:Math.max(.85,1-.07*m);return r.jsx("div",{className:`carousel-slide transition-all duration-700 ease-in-out ${d?"z-10":"z-0"}`,style:{transform:`scale(${u})`,opacity:d?1:Math.max(.8,1-.06*m),transformOrigin:"center bottom",marginLeft:d?"20px":"10px",marginRight:d?"20px":"10px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>a(e.indexOf(t)),children:r.jsx(n(),{href:`/truyen/${t.slug}`,className:"block group relative",children:(0,r.jsxs)("div",{className:"relative aspect-[2/3] overflow-hidden rounded-lg shadow-lg w-[180px] h-[270px]",children:[r.jsx(i(),{src:(0,c.J)(t.thumb_url),alt:t.name,width:180,height:270,className:`object-cover w-full h-full transition-transform duration-500 group-hover:scale-110 ${d?"brightness-110":""}`,onError:e=>{let t=e.target;t.src="/images/placeholder.jpg"}}),d&&(0,r.jsxs)("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-white/30 mix-blend-overlay"}),r.jsx("div",{className:"shine-effect"})]}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[r.jsx("span",{className:"label-hot text-white px-2 py-1 rounded-full text-xs font-bold",children:"HOT"}),r.jsx("span",{className:"label-new text-white px-2 py-1 rounded-full text-xs font-bold",children:"MỚI"}),t.sub_docquyen&&r.jsx("span",{className:"label-exclusive text-white px-2 py-1 rounded-full text-xs font-bold",children:"ĐỘC"})]}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/90 via-black/70 to-transparent",children:[r.jsx("h3",{className:"text-sm font-bold text-white line-clamp-1",children:t.name}),t.chaptersLatest&&t.chaptersLatest.length>0&&r.jsx("p",{className:"text-gray-200 text-xs",children:t.chaptersLatest[0].chapter_name})]})]})})},t._id)})})}),r.jsx("button",{onClick:()=>{s>0?a(s-1):a(e.length-1)},className:"absolute left-0 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-r-full z-10 focus:outline-none text-sm",children:"◀"}),r.jsx("button",{onClick:m,className:"absolute right-0 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-l-full z-10 focus:outline-none text-sm",children:"▶"})]})}},4876:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(3854),a=s(4218),i=s(5548),l=s.n(i);function n(){let[e,t]=(0,a.useState)([]);return((0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/history"),{data:s}=await e.json();t(s)}catch(e){console.error("Error fetching reading history:",e)}};e()},[]),0===e.length)?null:(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Lịch sử đọc"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(e=>{let t=Math.floor((Date.now()-e.timestamp)/1e3),s="";return s=t<60?`${t} gi\xe2y trước`:t<3600?`${Math.floor(t/60)} ph\xfat trước`:t<86400?`${Math.floor(t/3600)} giờ trước`:`${Math.floor(t/86400)} ng\xe0y trước`,(0,r.jsxs)(l(),{href:`/truyen/${e.comic.slug}/chapter/${e.chapter.slug}`,className:"block p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[r.jsx("h3",{className:"font-semibold mb-2 line-clamp-1",children:e.comic.name}),r.jsx("p",{className:"text-sm text-gray-400",children:e.chapter.name}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s})]},`${e.comic._id}-${e.chapter.slug}`)})})]})}},7919:(e,t,s)=>{"use strict";function r(e){return e?e.startsWith("http")?e:e.startsWith("/data/images/")?`https://img.otruyenapi.com${e}`:`https://img.otruyenapi.com/uploads/comics/${e}`:"/images/placeholder.jpg"}s.d(t,{J:()=>r})},2300:(e,t,s)=>{"use strict";let{createProxy:r}=s(5153);e.exports=r("C:\\Users\\Admin\\Desktop\\anh 282\\1\\vencomic\\node_modules\\next\\dist\\client\\link.js")},4353:(e,t,s)=>{"use strict";e.exports=s(2300)},6415:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(997),a=s(6689),i=s(4911),l=s(972),n=s(920),o=s(5153);let c=(0,o.createProxy)(String.raw`C:\Users\Admin\Desktop\anh 282\1\vencomic\src\components\ComicCarousel.tsx`),{__esModule:d,$$typeof:m}=c,h=c.default,u=(0,o.createProxy)(String.raw`C:\Users\Admin\Desktop\anh 282\1\vencomic\src\components\ReadingHistory.tsx`),{__esModule:x,$$typeof:p}=u,g=u.default;var f=s(7952);let b=[{slug:"manhua",name:"Manhua"},{slug:"xuyen-khong",name:"Xuy\xean Kh\xf4ng"},{slug:"chuyen-sinh",name:"Chuyển Sinh"},{slug:"manga",name:"Manga"},{slug:"comic",name:"Comic"},{slug:"fantasy",name:"Fantasy"}];async function v(){let{data:e}=await (0,i.eb)();console.log("Home data:",e);let t=e.items.slice(0,12),s=e.items.slice(0,24);return console.log("Number of latest comics:",s.length),(0,r.jsxs)("main",{className:"min-h-screen bg-gray-900 text-white",children:[(0,r.jsxs)("div",{className:"container mx-auto px-3 md:px-4 py-4 md:py-8 max-w-[1030px]",children:[r.jsx(g,{}),(0,r.jsxs)("section",{className:"mb-8 md:mb-12",children:[r.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6",children:"Truyện Nổi Bật"}),r.jsx(a.Suspense,{fallback:r.jsx(f.Z,{}),children:r.jsx("div",{className:"w-full relative overflow-hidden rounded-lg",children:r.jsx(h,{comics:t})})})]}),(0,r.jsxs)("section",{className:"mb-8 md:mb-12",children:[r.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6",children:"Truyện mới cập nhật"}),r.jsx(a.Suspense,{fallback:r.jsx(f.Z,{}),children:r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 md:gap-4",children:s.map(e=>r.jsx(n.ZP,{comic:e},e._id))})})]}),b.map(async e=>{let t=await (0,i.K0)(`https://otruyenapi.com/v1/api/the-loai/${e.slug}`);return(0,r.jsxs)("section",{className:"mb-8 md:mb-12",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[r.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:e.name}),r.jsx("a",{href:`/the-loai/${e.slug}`,className:"text-pink-500 hover:text-pink-400 text-sm md:text-base",children:"Xem tất cả"})]}),r.jsx(a.Suspense,{fallback:r.jsx(f.Z,{}),children:r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 md:gap-4",children:t.slice(0,6).map(e=>r.jsx(n.ZP,{comic:e},e._id))})})]},e.slug)})]}),r.jsx(l.Z,{})]})}},920:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>o});var r=s(5153);let a=(0,r.createProxy)(String.raw`C:\Users\Admin\Desktop\anh 282\1\vencomic\src\components\ComicCard.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n},7952:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(997);function a(){return r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[...Array(12)].map((e,t)=>(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"aspect-[2/3] bg-gray-800 rounded-lg mb-2"}),r.jsx("div",{className:"h-4 bg-gray-800 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-800 rounded w-1/2"})]},t))})}}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[271,927,529,464,469,283,822,678],()=>s(2191));module.exports=r})();