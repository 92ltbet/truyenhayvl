"use strict";(()=>{var e={};e.id=557,e.ids=[557],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},1813:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>y});var a={};r.r(a),r.d(a,{GET:()=>p,runtime:()=>u});var o=r(884),n=r(6132),i=r(1040),s=r(5798),c=r(4911);let u="nodejs";async function p(){try{return console.log("Running cron job at:",new Date().toLocaleString()),await (0,c.eb)(),s.Z.json({success:!0,message:"Cron job completed successfully"})}catch(e){return console.error("Cron job failed:",e),s.Z.json({success:!1,error:String(e)},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/cron/route",pathname:"/api/cron",filename:"route",bundlePath:"app/api/cron/route"},resolvedPagePath:"C:\\Users\\Admin\\Desktop\\anh 282\\1\\vencomic\\src\\app\\api\\cron\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:m,staticGenerationBailout:y}=l,f="/api/cron/route";function x(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},4911:(e,t,r)=>{r.d(t,{K0:()=>y,Ko:()=>l,Y_:()=>h,eb:()=>p,o0:()=>m,zG:()=>d});var a=r(7117),o=r(9822);let n="https://otruyenapi.com/v1/api",i=null,s=0;async function c(){let e=Date.now();if(i&&e-s<3e5)return i;try{let t=await a.Z.get(`${n}/comics`);return i=t.data,s=e,i}catch(e){return console.error("Error reading comics data:",e),[]}}let u=a.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});async function p(){try{let e=await u.get("/home"),t=e.data.data.items,r=t.map(e=>{let t=e.chaptersLatest?.[0];return{...e,chapters:t?[{chapter_name:t.chapter_name,chapter_title:t.chapter_title,chapter_api_data:t.chapter_api_data}]:[],total_chapters:t?parseInt(t.chapter_name):0}});return{data:{items:r}}}catch(e){return console.error("Error fetching home data:",e),{data:{items:[]}}}}async function l(e){try{let t=await c(),r=t.filter(t=>t.category?.some(t=>t.slug===e));return{data:{items:r}}}catch(e){return console.error("Error reading comics data:",e),{data:{items:[]}}}}new o.S({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5}}});let d=async e=>{try{console.log("Fetching comic detail for slug:",e);let t=await u.get(`/truyen-tranh/${e}`);return console.log("API Response:",t.data),t.data}catch(e){throw console.error("Error fetching comic detail:",e),e}},h=async e=>{let t=await a.Z.get(e);return t.data},g=async()=>{let e=await u.get("/the-loai");return e.data},m=async()=>{let{data:e}=await g(),t=e.items[0],r=await u.get(`/the-loai/${t.slug}`);return r.data};async function y(e,t=1,r=[]){try{let a=await fetch(`${e}?page=${t}`,{headers:{accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch data");let o=await a.json(),n=[...r,...o.data.items];if(o.data.pagination&&o.data.pagination.currentPage<o.data.pagination.totalPages)return y(e,t+1,n);return n}catch(e){return console.error("Error fetching all pages:",e),r}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[271,529,107],()=>r(1813));module.exports=a})();